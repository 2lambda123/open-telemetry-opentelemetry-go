// Code generated by "go.opentelemetry.io/otel/sdk/resource/internal/schema/gen"; DO NOT EDIT.
// Copyright The OpenTelemetry Authors
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

package schema

import (
	"github.com/Masterminds/semver/v3"
	"go.opentelemetry.io/otel/schema/v1.0/ast"
)

var transforms = []transform{
{{- range . }}
	{{- if or (.All.Changes) (.Resources.Changes) }}
	{
		Version: semver.New({{ .Version.Major }}, {{ .Version.Minor }}, {{ .Version.Patch }}, "{{ .Version.Prerelease }}", "{{ .Version.Metadata }}"),
		{{- if .All.Changes }}
		All: {{ template "astAttributes" .All }},
		{{- end }}
		{{- if .Resources.Changes }}
		Resources: {{ template "astAttributes" .Resources }},
		{{- end }}
	},
	{{- else }}
	{Version: semver.New({{ .Version.Major }}, {{ .Version.Minor }}, {{ .Version.Patch }}, "{{ .Version.Prerelease }}", "{{ .Version.Metadata }}")},
	{{- end }}
{{- end }}
}

{{- define "astAttributes" }}ast.Attributes{
	{{- if .Changes }}
	Changes: []ast.AttributeChange{
		{{- range .Changes }}
		{
			RenameAttributes: &ast.RenameAttributes{
			{{- with .RenameAttributes }}
				AttributeMap: {{- template "strStrMap" .AttributeMap }},
			{{- end }}
			},
		},
		{{- end }}
	},
}
	{{- else -}}
}
	{{- end -}}
{{- end }}

{{- define "strStrMap" }}map[string]string{
	{{- if . }}
		{{ range $key, $val := . }}"{{ $key }}": "{{ $val }}",
		{{ end }}
	{{- end  }}
}
{{- end }}

